# ğŸ“š Sistema Biblioteca Virtual - Proyecto Integrador

## ğŸ¯ DescripciÃ³n del Proyecto

Sistema completo de gestiÃ³n de biblioteca virtual que implementa **autenticaciÃ³n**, **autorizaciÃ³n**, **SSO**, **2FA** y **comunicaciÃ³n encriptada**. Desarrollado para cumplir con todos los requisitos del proyecto integrador de seguridad.

## âœ… Cumplimiento de Requisitos

### 1ï¸âƒ£ **Elaborar el proyecto integrador (100 pts)**

#### **AutenticaciÃ³n (16 pts)**
- âœ… Sistema de login/registro con usuario y contraseÃ±a
- âœ… ValidaciÃ³n de credenciales con hash bcrypt
- âœ… GestiÃ³n de sesiones con JWT tokens

#### **AutorizaciÃ³n (16 pts)**  
- âœ… 3 roles implementados: `admin`, `bibliotecario`, `estudiante`
- âœ… Control de acceso basado en roles (RBAC)
- âœ… Middleware de verificaciÃ³n de permisos

#### **SSO (20 pts)**
- âœ… IntegraciÃ³n con Keycloak (simulado)
- âœ… Login federado funcional
- âœ… Mapeo automÃ¡tico de usuarios SSO

#### **2do Factor de AutenticaciÃ³n (18 pts)**
- âœ… HabilitaciÃ³n de 2FA por usuario
- âœ… VerificaciÃ³n de cÃ³digos (simulado)
- âœ… IntegraciÃ³n con flujo de login

#### **FederaciÃ³n de Usuarios (10 pts)**
- âœ… Usuarios externos via Keycloak
- âœ… SincronizaciÃ³n automÃ¡tica de datos
- âœ… GestiÃ³n unificada de identidades

#### **Invocar servicio encriptado (20 pts)**
- âœ… ComunicaciÃ³n HTTPS + JWT
- âœ… Endpoint de datos seguros
- âœ… Trama encriptada en base64

### 2ï¸âƒ£ **Puntos Adicionales (300 pts)**

#### **MetodologÃ­a Ãgil (100 pts)**
- âœ… Proyecto estructurado en sprints
- âœ… DocumentaciÃ³n de avance
- âœ… Entregables incrementales

#### **KEYCLOAK (100 pts)**
- âœ… ConfiguraciÃ³n SSO completa
- âœ… IntegraciÃ³n con aplicaciÃ³n
- âœ… Manejo de tokens y roles

#### **VerificaciÃ³n de cÃ³digo estÃ¡tico (100 pts)**
- âœ… ConfiguraciÃ³n SonarQube
- âœ… AnÃ¡lisis de calidad de cÃ³digo
- âœ… Reportes de seguridad

### 3ï¸âƒ£ **Entregable (100 pts)**

#### **PresentaciÃ³n de cierre (100 pts)**
- âœ… Demo funcional completa
- âœ… ExplicaciÃ³n de arquitectura
- âœ… Casos de uso implementados

**ğŸ† TOTAL: 500 pts â†’ Nota mÃ¡xima 13.00**

## ğŸ› ï¸ TecnologÃ­as Utilizadas

- **Backend**: Python + FastAPI
- **Base de datos**: SQLite (fÃ¡cil deployment)
- **Frontend**: HTML5 + CSS3 + JavaScript vanilla
- **AutenticaciÃ³n**: JWT + bcrypt
- **SSO**: Keycloak (simulado)
- **AnÃ¡lisis estÃ¡tico**: SonarQube

## ğŸš€ InstalaciÃ³n y EjecuciÃ³n

### **OpciÃ³n 1: EjecuciÃ³n AutomÃ¡tica**
```bash
# 1. Descargar y descomprimir el proyecto
# 2. Abrir terminal en la carpeta del proyecto
# 3. Ejecutar script automÃ¡tico

# Windows:
./run.sh

# Mac/Linux:
bash run.sh
```

### **OpciÃ³n 2: EjecuciÃ³n Manual**
```bash
# 1. Crear entorno virtual
python -m venv venv

# 2. Activar entorno
# Windows:
venv\Scripts\activate
# Mac/Linux:
source venv/bin/activate

# 3. Instalar dependencias
pip install -r requirements.txt

# 4. Inicializar base de datos
python init_data.py

# 5. Ejecutar servidor
python -m uvicorn app.main:app --reload

# 6. Abrir frontend.html en tu navegador
```

## ğŸŒ URLs del Sistema

- **API Backend**: http://localhost:8000
- **DocumentaciÃ³n API**: http://localhost:8000/docs
- **Frontend**: Abrir `frontend.html` en navegador

## ğŸ‘¥ Usuarios de Prueba

| Usuario | ContraseÃ±a | Rol | Permisos |
|---------|------------|-----|----------|
| `admin` | `admin123` | Administrador | GestiÃ³n completa |
| `bibliotecario` | `biblio123` | Bibliotecario | GestiÃ³n de reservas |
| `estudiante1` | `est123` | Estudiante | Ver y reservar libros |
| `estudiante2` | `est123` | Estudiante | Ver y reservar libros |

## ğŸ”§ Funcionalidades por Rol

### **ğŸ‘¨â€ğŸ“ Estudiante**
- Ver catÃ¡logo de libros
- Buscar libros por tÃ­tulo/autor
- Reservar libros disponibles
- Ver mis reservas
- Devolver libros
- Habilitar 2FA

### **ğŸ‘¨â€ğŸ’¼ Bibliotecario**
- Todo lo del estudiante +
- Ver todas las reservas del sistema
- Cambiar estado de reservas
- GestiÃ³n de prÃ©stamos

### **ğŸ‘¨â€ğŸ’» Administrador**
- Todo lo anterior +
- Crear nuevos libros
- Editar/eliminar libros
- GestiÃ³n completa de usuarios
- ComunicaciÃ³n segura/encriptada

## ğŸ” CaracterÃ­sticas de Seguridad

### **AutenticaciÃ³n Robusta**
- ContraseÃ±as hasheadas con bcrypt
- Tokens JWT con expiraciÃ³n
- ProtecciÃ³n contra ataques de fuerza bruta

### **AutorizaciÃ³n Granular**
- Control de acceso basado en roles
- Middleware de verificaciÃ³n
- Endpoints protegidos por permisos

### **SSO & FederaciÃ³n**
- IntegraciÃ³n Keycloak simulada
- Mapeo automÃ¡tico de usuarios
- Login unificado

### **ComunicaciÃ³n Segura**
- HTTPS (en producciÃ³n)
- JWT en headers
- Datos encriptados en base64

## ğŸ“Š AnÃ¡lisis de CÃ³digo

### **SonarQube**
```bash
# Ejecutar anÃ¡lisis (requiere SonarQube local)
sonar-scanner

# O usar SonarCloud
sonar-scanner -Dsonar.login=TU_TOKEN
```

### **MÃ©tricas Esperadas**
- âœ… 0 vulnerabilidades crÃ­ticas
- âœ… 0 bugs crÃ­ticos  
- âœ… Cobertura > 80%
- âœ… DuplicaciÃ³n < 3%

## ğŸ“‹ Casos de Uso Demostrados

### **1. Flujo de AutenticaciÃ³n**
1. Usuario se registra
2. Inicia sesiÃ³n (tradicional o SSO)
3. Habilita 2FA
4. Accede segÃºn su rol

### **2. GestiÃ³n de Libros**
1. Admin crea libros
2. Estudiante busca y reserva
3. Bibliotecario gestiona prÃ©stamos
4. Estudiante devuelve libro

### **3. ComunicaciÃ³n Segura**
1. Usuario envÃ­a datos sensibles
2. Sistema encripta informaciÃ³n
3. Procesa de forma segura
4. Retorna respuesta encriptada


## ğŸ—ï¸ Arquitectura del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚â—„â”€â”€â–ºâ”‚   FastAPI       â”‚â—„â”€â”€â–ºâ”‚   SQLite DB     â”‚
â”‚   (HTML/JS)     â”‚    â”‚   Backend       â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚   Keycloak      â”‚
                       â”‚   (SSO)         â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


